import{a as q}from"./chunk-OQROPORG.js";import{a as Z}from"./chunk-7UVHNH5K.js";import{a as L}from"./chunk-NHS2BW3J.js";import{a as k}from"./chunk-Z2JIHJKC.js";import"./chunk-RUNL3XBD.js";import"./chunk-JCJIXIGU.js";import"./chunk-ODOJOCJF.js";import{c as $,e as B}from"./chunk-YLFRZMSI.js";import"./chunk-SG3IG2V7.js";import{h as M,i as V,j as N,m as P}from"./chunk-XNJB6KBV.js";import{b as z,c as H,d as J}from"./chunk-SQ36XKR5.js";import{$a as o,Bb as j,Cb as I,Ea as s,Eb as O,Fa as d,Fb as v,Gb as h,Va as u,Xa as p,Y as E,_ as T,_a as F,ab as l,bb as m,cb as C,db as w,eb as S,ia as b,ib as f,ja as _,jb as g,qb as c,rb as y,sb as U,tb as A,ub as D,zb as R}from"./chunk-PZVZLHCQ.js";import"./chunk-ODN5LVDJ.js";var Q=(t,i)=>({"w-96 space-y-8":t,"w-22 space-y-24":i}),W=(t,i)=>({block:t,hidden:i}),X=(t,i,a,e)=>({"bg-red-700":t,"text-white":i,"w-82":a,"w-11":e}),Y=t=>({"bg-red-100 hover:bg-red-100":t});function ee(t,i){if(t&1&&(o(0,"span",23),c(1),v(2,"translate"),l()),t&2){let a=g().$implicit;s(),y(h(2,1,a.label))}}function te(t,i){if(t&1){let a=S();o(0,"li",20),f("click",function(){let r=b(a).$implicit,n=g();return _(r.route==="download"?n.downloadPdf():n.goto(r.route))}),m(1,"i",21),u(2,ee,3,3,"span",22),l()}if(t&2){let a=i.$implicit,e=g();p("ngClass",O(4,X,e.activeRoute===a.route,e.activeRoute===a.route,!e.isCollapsed,e.isCollapsed)),s(),F(a.icon),s(),p("ngIf",!e.isCollapsed)}}function ie(t,i){t&1&&(C(0),m(1,"i",24),c(2),v(3,"translate"),w()),t&2&&(s(2),U(" ",h(3,1,"home-user.logout")," "))}function ne(t,i){t&1&&(C(0),m(1,"i",25),w())}function ae(t,i){if(t&1){let a=S();o(0,"tr",26)(1,"td",27),c(2),v(3,"dateFormat"),l(),o(4,"td",27),c(5),l(),o(6,"td",28)(7,"button",29),f("click",function(){let r=b(a).$implicit,n=g();return _(n.declineAvailability(r.availability_id))}),m(8,"i",30),c(9," D\xE9cliner "),l()()()}if(t&2){let a=i.$implicit;p("ngClass",j(7,Y,a.available=="0")),s(2),y(h(3,5,a.date)),s(3),A("",a.start_time," - ",a.end_time,""),s(2),p("disabled",a.available=="0")}}var he=(()=>{let i=class i{constructor(e,r,n,x,G,K){this.route=e,this.userService=r,this.speakerAvalabilityService=n,this.router=x,this.appointmentService=G,this.apppointmentService=K,this.intervenants=[],this.translate=E(z),this.isCollapsed=!1,this.activeRoute="",this.menuItems=[{label:"home-user.intervenants",route:"homeuser",icon:"fas fa-users"},{label:"home-user.participants",route:"participants",icon:"fas fa-users"},{label:"home-user.my-appointments",route:"mes-rendez-vous",icon:"fas fa-calendar-alt"},{label:"home-user.appointment-management",route:"/dashboard/gestion-rv",icon:"fas fa-database"},{label:"home-user.calendar-management",route:"calandar",icon:"fas fa-calendar-check"},{label:"home-user.download",route:"download",icon:"fa fa-arrow-circle-down"}]}ngOnInit(){this.translate.setDefaultLang("fr");let e=localStorage.getItem("userToken");e?(this.user=JSON.parse(e),this.speakerAvalabilityService.getUserCalendar(parseInt(this.user.id)).subscribe(r=>{this.appointments=r,console.log("Disponibilit\xE9:",this.appointments)},r=>{console.error("Error fetching disponibility details",r)}),console.log(this.user)):console.error("No user token found in localStorage")}translateText(e){this.translate.use(e)}logout(){localStorage.removeItem("userToken"),window.location.href="/login"}goToRdv(){this.router.navigate(["/mes-rendez-vous"])}goToIntervenant(){window.location.href="/homeuser"}goToDetail(e){this.router.navigate(["/intervenant",e])}goToParticipants(){window.location.href="/participants"}declineAvailability(e){console.log(e),this.speakerAvalabilityService.updateAvailability(e).subscribe(r=>{console.log(r),window.location.href="/calandar"})}goTocandar(){this.router.navigate(["/calandar"])}goToRv(){this.router.navigate(["dashboard/gestion-rv"])}downloadPdf(){let e="123";this.appointmentService.downloadCalendar(this.user.id)}goto(e){this.router.navigate([e])}toggleSidebar(){this.isCollapsed=!this.isCollapsed}};i.\u0275fac=function(r){return new(r||i)(d($),d(Z),d(q),d(B),d(k),d(k))},i.\u0275cmp=T({type:i,selectors:[["app-user-calendar"]],standalone:!0,features:[R],decls:32,vars:17,consts:[[1,"flex","font-poppins"],[1,"bg-red-900","text-white","rounded-xl","flex","flex-col","py-4","mx-2","mt-4","mb-4",3,"ngClass"],[1,"px-4"],[1,"focus:outline-none","pl-2",3,"click"],[1,"fas","fa-bars"],[1,"p-4","text-center",3,"ngClass"],[1,"text-xl","font-semibold"],[1,"flex-1","ml-4","space-y-4","overflow-auto"],["class","h-12 p-2 flex items-center cursor-pointer hover:bg-red-700",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"bg-white","text-red-900","p-2","rounded","mt-auto","mx-4","flex","items-center","justify-center",3,"click"],[4,"ngIf"],[1,"w-4/5","px-6","flex-grow"],[1,"text-3xl","font-bold","text-red-900","mb-8"],[1,"container","mx-auto","p-8","bg-gray-200","rounded-lg","shadow-lg"],[1,"text-3xl","font-extrabold","mb-8","text-center","text-gray-800"],[1,"overflow-x-auto"],[1,"min-w-full","bg-white","shadow-md","rounded-lg","overflow-hidden"],[1,"bg-red-800","text-white"],[1,"py-3","px-4","text-center","font-light"],["class","hover:bg-gray-100",3,"ngClass",4,"ngFor","ngForOf"],[1,"h-12","p-2","flex","items-center","cursor-pointer","hover:bg-red-700",3,"click","ngClass"],[1,"mr-2"],["class","text-xs sm:text-lg font-light",4,"ngIf"],[1,"text-xs","sm:text-lg","font-light"],[1,"fas","fa-sign-out-alt","mr-2"],[1,"fas","fa-sign-out-alt"],[1,"hover:bg-gray-100",3,"ngClass"],[1,"border","px-4","py-4","text-center","text-gray-700"],[1,"border","px-4","py-4","text-center"],[1,"text-red-600","hover:text-red-900",3,"click","disabled"],[1,"fas","fa-times-circle"]],template:function(r,n){r&1&&(o(0,"div",0)(1,"aside",1)(2,"div",2)(3,"button",3),f("click",function(){return n.toggleSidebar()}),m(4,"i",4),l()(),o(5,"div",5)(6,"p",6),c(7),v(8,"translate"),l()(),o(9,"ul",7),u(10,te,3,9,"li",8),l(),o(11,"button",9),f("click",function(){return n.logout()}),u(12,ie,4,3,"ng-container",10)(13,ne,2,0,"ng-container",10),l()(),o(14,"main",11)(15,"h1",12),c(16,"MES RENDEZ-VOUS"),l(),o(17,"div",13)(18,"h2",14),c(19,"Mes Rendez-vous"),l(),o(20,"div",15)(21,"table",16)(22,"thead",17)(23,"tr")(24,"th",18),c(25,"Date"),l(),o(26,"th",18),c(27,"Horaire"),l(),o(28,"th",18),c(29,"Action"),l()()(),o(30,"tbody"),u(31,ae,10,9,"tr",19),l()()()()()()),r&2&&(s(),p("ngClass",I(11,Q,!n.isCollapsed,n.isCollapsed)),s(4),p("ngClass",I(14,W,!n.isCollapsed,n.isCollapsed)),s(2),D(" ",h(8,9,"home-user.hello")," ",n.user.first_name," ",n.user.last_name," "),s(3),p("ngForOf",n.menuItems),s(2),p("ngIf",!n.isCollapsed),s(),p("ngIf",n.isCollapsed),s(18),p("ngForOf",n.appointments))},dependencies:[L,P,M,V,N,J,H]});let t=i;return t})();export{he as UserCalendarComponent};
