<div class="flex font-poppins">
    <aside class="w-1/5 bg-red-900 text-white h-screen p-4">
        <div class="mb-8 mt-10">
          <p class="text-white text-xl">BONJOUR</p>
        </div>
        <ul>
          <li class="flex items-center p-2 mt-6 text-gray-200 hover:bg-red-700">
            <i class="fas fa-home mr-3"></i><button routerLink="/dashboard" class="text-white hover:text-gray-200">Tableau de bord</button> 
          </li>
          <li class="flex items-center p-2 mt-6 text-gray-200 hover:bg-red-700">
            <i class="fas fa-bell mr-3"></i> <button routerLink="dashboard/notification">Notification</button>  
            <span class="bg-red-600 text-white text-xs ml-auto rounded-full px-2"></span>
          </li>
          <li class="flex items-center p-2 mt-6 text-gray-200 hover:bg-red-700">
            <i class="fas fa-database mr-3"></i>
            <button routerLink="/dashboard/gestion-rv" class="text-white hover:text-gray-200">Gestion des rendez-vous</button>
          </li>
          <li class="flex items-center p-2 mt-64 text-gray-200 hover:bg-red-700">
            <i class="fas fa-sign-out-alt mr-3"></i>
            <button class="text-white hover:text-gray-200" (click)="logout()">Déconnexion</button>
          </li>
        </ul>
      </aside>
      <div class="flex-1 p-6 mt-6">
        <h1 class="text-2xl font-semibold text-gray-700 mb-6 text-center">LISTE DES NOTIFICATIONS</h1>
        <table class="min-w-full divide-y divide-gray-200 mt-10">
          <thead class="bg-red-900 text-white">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">Nom</th>
              <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">Message</th>
              <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">Date de Création</th>
              <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">Statut</th>
              <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">Actions</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <tr *ngFor="let notification of notifications" [ngClass]="{'bg-gray-100': notification.status === 'Lu', 'bg-white': notification.status !== 'Lu'}">
              <td class="py-4 px-6">{{ notification.name }}</td>
              <td class="py-4 px-6">
                <button class="text-customBlue font-semibold" (click)="openPopup(notification)">
                  Voir le message complet
                </button>
              </td>
              <td class="py-4 px-6">{{ notification.creationDate | date:'dd MMM yyyy' }}</td>
              <td class="py-4 px-6">
                <span [ngClass]="{'bg-green-500 text-white px-6 py-1 rounded-sm': notification.status === 'Lu', 'bg-red-500 text-white px-2 py-1 rounded': notification.status !== 'Lu'}">
                  {{ notification.status }}
                </span>
              </td>
              <td class="py-4 px-6 ml-4 flex items-center">
                <button class="text-red-500 " (click)="deleteNotification(notification)">
                  <i class="fas fa-trash-alt"></i>
                </button>
              </td>
              
            </tr>
          </tbody>
        </table>
      
        <div class="flex justify-between items-center mt-10">
          <span>Items per page: 
            <select [(ngModel)]="itemsPerPage" (change)="onItemsPerPageChange($event)">
              <option *ngFor="let option of [5, 10, 20]" [value]="option">{{ option }}</option>
            </select>
          </span>
          <span>{{ currentPage }} – {{ currentPage + itemsPerPage - 1 }} of {{ totalItems }}</span>
          <div>
            <button (click)="prevPage()" [disabled]="currentPage === 1"><i class="fas fa-chevron-left"></i></button>
            <button (click)="nextPage()" [disabled]="currentPage + itemsPerPage - 1 >= totalItems"><i class="fas fa-chevron-right"></i></button>
          </div>
        </div>
      </div>
      
      <!-- Popup Modal -->
      <div *ngIf="selectedNotification" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50">
        <div class="bg-white p-6 rounded-lg shadow-lg">
          <h2 class="text-lg font-semibold mb-4">{{ selectedNotification.name }}</h2>
          <p class="mb-4">{{ selectedNotification.message }}</p>
          <button (click)="markAsRead()" class="bg-blue-500 text-white px-4 py-2 rounded">
            OK
          </button>
          <button (click)="closePopup()" class="ml-4 text-gray-700">Annuler</button>
        </div>
      </div>
      