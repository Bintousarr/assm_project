import{a as te}from"./chunk-OQROPORG.js";import{a as ee}from"./chunk-7UVHNH5K.js";import{a as Z}from"./chunk-NHS2BW3J.js";import{a as Y}from"./chunk-Z2JIHJKC.js";import"./chunk-RUNL3XBD.js";import"./chunk-JCJIXIGU.js";import"./chunk-ODOJOCJF.js";import{b as G,d as H,g as Q,u as X}from"./chunk-WUVU5367.js";import{c as L,e as W}from"./chunk-YLFRZMSI.js";import"./chunk-SG3IG2V7.js";import{h as N,i as P,j as R,m as $}from"./chunk-XNJB6KBV.js";import{b as J,c as q,d as K}from"./chunk-SQ36XKR5.js";import{$a as o,Ba as C,Cb as T,Ea as a,Eb as M,Fa as b,Fb as u,Gb as v,Va as g,Xa as d,Y as F,_ as O,_a as V,ab as l,bb as c,cb as S,db as k,eb as I,ia as h,ib as _,ja as x,jb as m,kb as j,qb as p,rb as f,sb as w,tb as E,ub as D,vb as B,wb as U,xb as A,zb as z}from"./chunk-PZVZLHCQ.js";import"./chunk-ODN5LVDJ.js";var ne=(t,r)=>({"w-96 space-y-8":t,"w-22 space-y-24":r}),ae=(t,r)=>({block:t,hidden:r}),re=(t,r,i,n)=>({"bg-red-700":t,"text-white":r,"w-82":i,"w-11":n}),oe=(t,r,i,n)=>({"bg-blue-300 text-blue-700 hover:bg-blue-700 hover:text-white":t,"bg-yellow-100 text-yellow-700":r,"bg-green-100 text-green-700":i,"bg-blue-100 text-blue-700":n});function le(t,r){if(t&1&&(o(0,"span",38),p(1),u(2,"translate"),l()),t&2){let i=m().$implicit;a(),f(v(2,1,i.label))}}function se(t,r){if(t&1){let i=I();o(0,"li",35),_("click",function(){let s=h(i).$implicit,e=m();return x(s.route==="download"?e.downloadPdf():e.goto(s.route))}),c(1,"i",36),g(2,le,3,3,"span",37),l()}if(t&2){let i=r.$implicit,n=m();d("ngClass",M(4,re,n.activeRoute===i.route,n.activeRoute===i.route,!n.isCollapsed,n.isCollapsed)),a(),V(i.icon),a(),d("ngIf",!n.isCollapsed)}}function de(t,r){t&1&&(S(0),c(1,"i",39),p(2),u(3,"translate"),k()),t&2&&(a(2),w(" ",v(3,1,"home-user.logout")," "))}function pe(t,r){t&1&&(S(0),c(1,"i",40),k())}function me(t,r){if(t&1&&(o(0,"div",26),p(1),c(2,"br"),o(3,"span",41),p(4),u(5,"dateFormat"),l()()),t&2){let i=r.$implicit;a(),w(" ",i.name,""),a(3),f(v(5,2,i.date))}}function ce(t,r){if(t&1){let i=I();o(0,"button",46),_("click",function(){h(i);let s=m().$implicit,e=m().$implicit,y=m();return x(y.openModal(e,s))}),p(1),l()}if(t&2){let i=m().$implicit;d("ngClass",M(4,oe,i.status==="libre",i.status==="en attente",i.status==="approuv\xE9",i.status==="d\xE9clin\xE9"))("disabled",i.status==="en attente"||i.status==="approuv\xE9"),a(),E(" ",i.start_time," - ",i.end_time," ")}}function ue(t,r){t&1&&(o(0,"div",47),p(1,"\u2014"),l())}function ve(t,r){if(t&1&&(o(0,"div",43),g(1,ce,2,9,"button",44)(2,ue,2,0,"div",45),l()),t&2){let i=r.$implicit;a(),d("ngIf",i!=="\u2014"),a(),d("ngIf",i==="\u2014")}}function ge(t,r){if(t&1&&(o(0,"div"),g(1,ve,3,2,"div",42),l()),t&2){let i=r.$implicit;a(),d("ngForOf",i.slots)}}function fe(t,r){if(t&1){let i=I();o(0,"div",48)(1,"div",49)(2,"h2",50),p(3),u(4,"translate"),l(),o(5,"textarea",51),u(6,"translate"),A("ngModelChange",function(s){h(i);let e=m();return U(e.motif,s)||(e.motif=s),x(s)}),l(),o(7,"div",52)(8,"button",53),_("click",function(){h(i);let s=m();return x(s.submitMotif())}),p(9),u(10,"translate"),l(),o(11,"button",54),_("click",function(){h(i);let s=m();return x(s.closeModal())}),p(12),u(13,"translate"),l()()()()}if(t&2){let i=m();a(3),f(v(4,5,"intervenant-detail.enter-reason")),a(2),j("placeholder",v(6,7,"intervenant-detail.enter-your-reason")),B("ngModel",i.motif),a(4),f(v(10,9,"intervenant-detail.validate")),a(3),f(v(13,11,"intervenant-detail.cancel"))}}var Fe=(()=>{let r=class r{constructor(n,s,e,y,ie){this.route=n,this.userService=s,this.speakerAvalabilityService=e,this.router=y,this.apppointmentService=ie,this.idintervenant=0,this.appointment={speaker_id:0,participant_id:0,day_id:0,time_slot_id:0,theme:""},this.isCollapsed=!1,this.activeRoute="",this.menuItems=[{label:"home-user.intervenants",route:"homeuser",icon:"fas fa-users"},{label:"home-user.participants",route:"participants",icon:"fas fa-users"},{label:"home-user.my-appointments",route:"mes-rendez-vous",icon:"fas fa-calendar-alt"},{label:"home-user.appointment-management",route:"/dashboard/gestion-rv",icon:"fas fa-database"},{label:"home-user.calendar-management",route:"calandar",icon:"fas fa-calendar-check"},{label:"home-user.download",route:"download",icon:"fa fa-arrow-circle-down"}],this.isModalOpen=!1,this.selectedTime=null,this.motif="",this.days=[{name:"Lundi",date:"02 D\xE9c."},{name:"Mardi",date:"03 D\xE9c."},{name:"Mercredi",date:"04 D\xE9c."},{name:"Jeudi",date:"05 D\xE9c."},{name:"Vendredi",date:"06 D\xE9c."}],this.timeSlots=[["15:30","16:00"],["10:30","11:00","11:45"],["10:30","11:00","11:45","13:00"],["10:30","11:00","12:15"],["\u2014","\u2014"]],this.translate=F(J)}ngOnInit(){this.translate.setDefaultLang("fr");let n=localStorage.getItem("userToken");console.log(localStorage.getItem("userToken")),n?this.storedUser=JSON.parse(n):console.error("No user token found in localStorage"),console.log("Stored user:",this.storedUser);let s=this.route.snapshot.paramMap.get("id");this.intervant_id=s,this.storedUser.role=="Intervenant"?(this.userService.getIntervenantById(this.intervant_id).subscribe(e=>{this.intervenant=e,console.log("Intervenant:",this.intervenant)},e=>{console.error("Error fetching intervenant details",e)}),this.speakerAvalabilityService.getSpeakerAvailabilityWithDetails(parseInt(this.intervant_id)).subscribe(e=>{this.disponibilities=e,console.log("Disponibilit\xE9:",this.disponibilities)},e=>{console.error("Error fetching disponibility details",e)})):(this.userService.getParticipantById(this.intervant_id).subscribe(e=>{this.intervenant=e,console.log("Intervenant:",this.intervenant)},e=>{console.error("Error fetching intervenant details",e)}),this.speakerAvalabilityService.getSpeakerAvailabilityWithDetails(parseInt(this.intervant_id)).subscribe(e=>{this.disponibilities=e,console.log("Disponibilit\xE9:",this.disponibilities)},e=>{console.error("Error fetching disponibility details",e)}))}translateText(n){this.translate.use(n)}openModal(n,s){console.log(n),console.log(s),this.appointment.day_id=n.day_id,this.appointment.speaker_id=n.speaker_id,this.appointment.participant_id=this.storedUser.id,this.appointment.time_slot_id=s.time_slot_id,console.log(this.appointment),this.isModalOpen=!0}closeModal(){this.isModalOpen=!1,this.motif="",this.selectedTime=null}submitMotif(){this.appointment.theme=this.motif,console.log("Motif pour :",this.appointment),this.apppointmentService.register(this.appointment).subscribe(n=>{console.log("Intervenant:",n),location.reload()},n=>{console.error("Error fetching intervenant details",n)}),this.closeModal()}logout(){localStorage.removeItem("userToken"),window.location.href="/login"}goToRdv(){this.router.navigate(["/mes-rendez-vous"])}goToIntervenant(){window.location.href="/homeuser"}goToDetail(n){this.router.navigate(["/intervenant",n])}goToParticipants(){window.location.href="/participants"}goTocandar(){this.router.navigate(["/calandar"])}downloadPdf(){let n="123";this.apppointmentService.downloadCalendar(this.storedUser.id)}goto(n){this.router.navigate([n])}toggleSidebar(){this.isCollapsed=!this.isCollapsed}};r.\u0275fac=function(s){return new(s||r)(b(L),b(ee),b(te),b(W),b(Y))},r.\u0275cmp=O({type:r,selectors:[["app-intervenant-detail"]],standalone:!0,features:[z],decls:48,vars:34,consts:[[1,"flex","font-poppins"],[1,"bg-red-900","text-white","rounded-xl","flex","flex-col","py-4","h-full","mx-2","mt-4","mb-4",3,"ngClass"],[1,"px-4"],[1,"focus:outline-none","pl-2",3,"click"],[1,"fas","fa-bars"],[1,"p-4","text-center",3,"ngClass"],[1,"text-xl","font-semibold"],[1,"flex-1","ml-4","space-y-4","overflow-auto"],["class","h-12 p-2 flex items-center cursor-pointer hover:bg-red-700",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"bg-white","text-red-900","p-2","rounded","mt-auto","mx-4","flex","items-center","justify-center",3,"click"],[4,"ngIf"],[1,"w-full","lg:w-4/5","px-6","flex-grow","h-full","min-w-[60rem]"],[1,"text-3xl","font-bold","text-red-900","mb-8"],[1,"bg-red-900","font-poppins","p-8","rounded-lg","shadow-lg"],[1,"flex","flex-wrap","items-center","space-x-6"],[1,"w-60","h-60","rounded-full","object-cover",3,"src"],[1,"text-white","text-4xl","font-bold"],[1,"text-white","text-lg"],[1,"pt-8","text-justify","font-poppins"],[1,"items-center","w-full"],[1,"text-gray-700","text-lg","flex-grow"],[1,"my-4","border-gray-300","mt-10"],[1,"max-w-full","bg-gray-100","mt-10","p-6","shadow-lg","rounded-lg"],[1,"flex","items-center","mb-4"],["alt","Krys Logo",1,"w-12","h-12","mr-4","rounded-full",3,"src"],[1,"text-lg","font-semibold","text-blue-700"],[1,"text-gray-500"],[1,"fas","fa-map-marker-alt"],[1,"mt-1"],[1,"px-4","pb-4","mt-5","h-28","sm:h-40","overflow-auto"],[1,"grid","grid-cols-3","md:grid-cols-3","gap-4","text-center"],["class","text-gray-500",4,"ngFor","ngForOf"],[1,"grid","grid-cols-3","md:grid-cols-3","gap-4","text-center","mt-2"],[4,"ngFor","ngForOf"],["class","fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",4,"ngIf"],[1,"h-12","p-2","flex","items-center","cursor-pointer","hover:bg-red-700",3,"click","ngClass"],[1,"mr-2"],["class","text-xs sm:text-lg font-light",4,"ngIf"],[1,"text-xs","sm:text-lg","font-light"],[1,"fas","fa-sign-out-alt","mr-2"],[1,"fas","fa-sign-out-alt"],[1,"font-semibold"],["class","mt-2",4,"ngFor","ngForOf"],[1,"mt-2"],["class","py-2 px-4 text-lg rounded mt-2 mb-6",3,"ngClass","disabled","click",4,"ngIf"],["class","text-gray-400 py-2 mt-1 text-lg",4,"ngIf"],[1,"py-2","px-4","text-lg","rounded","mt-2","mb-6",3,"click","ngClass","disabled"],[1,"text-gray-400","py-2","mt-1","text-lg"],[1,"fixed","inset-0","flex","items-center","justify-center","z-50","bg-black","bg-opacity-50"],[1,"bg-white","p-8","rounded-lg","shadow-lg","w-96","relative","z-10"],[1,"text-xl","font-semibold","mb-4"],["rows","4",1,"w-full","p-3","border","border-gray-300","rounded-md","mb-4","text-lg",3,"ngModelChange","ngModel","placeholder"],[1,"flex","justify-end","space-x-4"],[1,"bg-blue-500","text-white","px-6","py-3","rounded-md","text-lg","hover:bg-blue-600",3,"click"],[1,"bg-red-500","text-white","px-6","py-3","rounded-md","text-lg","hover:bg-red-600",3,"click"]],template:function(s,e){s&1&&(o(0,"div",0)(1,"aside",1)(2,"div",2)(3,"button",3),_("click",function(){return e.toggleSidebar()}),c(4,"i",4),l()(),o(5,"div",5)(6,"p",6),p(7),u(8,"translate"),l()(),o(9,"ul",7),g(10,se,3,9,"li",8),l(),o(11,"button",9),_("click",function(){return e.logout()}),g(12,de,4,3,"ng-container",10)(13,pe,2,0,"ng-container",10),l()(),o(14,"main",11)(15,"h1",12),p(16),u(17,"translate"),l(),o(18,"div",13)(19,"div",14),c(20,"img",15),o(21,"div")(22,"h1",16),p(23),l(),o(24,"p",17),p(25),l()()()(),o(26,"div",18)(27,"div",19)(28,"p",20),p(29),l()(),c(30,"hr",21),o(31,"div",22)(32,"div",23),c(33,"img",24),o(34,"div")(35,"h2",25),p(36),u(37,"translate"),l(),o(38,"p",26),c(39,"i",27),p(40),l()()(),c(41,"hr",28),o(42,"div",29)(43,"div",30),g(44,me,6,4,"div",31),l(),o(45,"div",32),g(46,ge,2,1,"div",33),l()()(),g(47,fe,14,13,"div",34),l()()()),s&2&&(a(),d("ngClass",T(28,ne,!e.isCollapsed,e.isCollapsed)),a(4),d("ngClass",T(31,ae,!e.isCollapsed,e.isCollapsed)),a(2),D(" ",v(8,22,"home-user.hello")," ",e.storedUser.first_name," ",e.storedUser.last_name," "),a(3),d("ngForOf",e.menuItems),a(2),d("ngIf",!e.isCollapsed),a(),d("ngIf",e.isCollapsed),a(3),f(v(17,24,"intervenant-detail.request-appointment")),a(4),d("src",e.intervenant!=null&&e.intervenant.image?"../../../assets/"+e.intervenant.image:"assets/user.jpg",C),a(3),E("",e.intervenant==null?null:e.intervenant.first_name," ",e.intervenant==null?null:e.intervenant.last_name,""),a(2),f(e.intervenant==null?null:e.intervenant.poste),a(4),f(e.intervenant==null?null:e.intervenant.description_parcours),a(4),d("src",e.intervenant!=null&&e.intervenant.image?"../../../assets/"+e.intervenant.image:"../../../assets/user.jpg",C),a(3),D("",v(37,26,"intervenant-detail.interview-with")," ",e.intervenant==null?null:e.intervenant.title," ",e.intervenant==null?null:e.intervenant.first_name,""),a(4),w(" ",e.intervenant==null?null:e.intervenant.country,""),a(4),d("ngForOf",e.disponibilities),a(2),d("ngForOf",e.disponibilities),a(),d("ngIf",e.isModalOpen))},dependencies:[$,N,P,R,X,G,H,Q,Z,K,q]});let t=r;return t})();export{Fe as IntervenantDetailComponent};
